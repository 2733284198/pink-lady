{
    "swagger": "2.0",
    "info": {
        "description": "pink-lady web API list.",
        "title": "pink-lady Web API",
        "contact": {
            "name": "API Support",
            "url": "http://axiaoxin.com",
            "email": "254606826@qq.com"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "0.0.1"
    },
    "host": "127.0.0.1:4869",
    "basePath": "/",
    "paths": {
        "/demo/alert-policy": {
            "get": {
                "description": "根据appid、uin、搜索条件等查询告警策略列表，包括其关联数据",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "demo"
                ],
                "summary": "查询告警策略列表",
                "parameters": [
                    {
                        "type": "integer",
                        "default": 1,
                        "description": "必填参数",
                        "name": "appid",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "default": "axiaoxin",
                        "description": "必填参数",
                        "name": "uin",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "default": 0,
                        "description": "分页offset",
                        "name": "offset",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "default": 10,
                        "description": "分页limit",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "default": "id desc",
                        "description": "排序方式",
                        "name": "order",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "按ID搜索",
                        "name": "id",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "按名字模糊搜索",
                        "name": "name",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            },
            "put": {
                "description": "更新告警策略成功返回true",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "demo"
                ],
                "summary": "更新告警策略",
                "parameters": [
                    {
                        "description": "参数包含BaseParam和demomod.AlertPolicy",
                        "name": "json",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/apis.ModifyAlertPolicyParam"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            },
            "post": {
                "description": "新增告警策略返回对应ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "demo"
                ],
                "summary": "新增告警策略",
                "parameters": [
                    {
                        "description": "参数包含BaseParam和demomod.AlertPolicy",
                        "name": "json",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/apis.CreateAlertPolicyParam"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/demo/alert-policy/{appid}/{uin}/{id}": {
            "get": {
                "description": "根据appid、uin查询指定id的告警策略详情，包括其关联数据",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "demo"
                ],
                "summary": "查询指定告警策略",
                "parameters": [
                    {
                        "type": "integer",
                        "default": 1,
                        "description": "param desc",
                        "name": "appid",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "default": "axiaoxin",
                        "description": "param desc",
                        "name": "uin",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "param desc",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            },
            "delete": {
                "description": "根据appid、uin删除指定id的告警策略，包括其关联条件，成功Data为true",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "demo"
                ],
                "summary": "删除告警策略",
                "parameters": [
                    {
                        "type": "integer",
                        "default": 1,
                        "description": "param desc",
                        "name": "appid",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "string",
                        "default": "axiaoxin",
                        "description": "param desc",
                        "name": "uin",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "param desc",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        },
        "/x/ping": {
            "get": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "x"
                ],
                "summary": "Ping for server is living will respond API version",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/response.Response"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "apis.CreateAlertPolicyParam": {
            "type": "object",
            "required": [
                "alert_policy",
                "appid",
                "uin"
            ],
            "properties": {
                "alert_policy": {
                    "description": "AlertPolicy不能使用匿名结构体，里面的AppID和Uin会和BaseParam里面的冲突，否则导致参数绑定失败",
                    "type": "object",
                    "$ref": "#/definitions/demomod.AlertPolicy"
                },
                "appid": {
                    "description": "appid",
                    "type": "integer",
                    "example": 1
                },
                "uin": {
                    "description": "根帐号uin",
                    "type": "string",
                    "example": "axiaoxin"
                }
            }
        },
        "apis.ModifyAlertPolicyParam": {
            "type": "object",
            "required": [
                "alert_policy",
                "appid",
                "uin"
            ],
            "properties": {
                "alert_policy": {
                    "description": "AlertPolicy不能使用匿名结构体，里面的AppID和Uin会和BaseParam里面的冲突，否则导致参数绑定失败",
                    "type": "object",
                    "$ref": "#/definitions/demomod.AlertPolicy"
                },
                "appid": {
                    "description": "appid",
                    "type": "integer",
                    "example": 1
                },
                "uin": {
                    "description": "根帐号uin",
                    "type": "string",
                    "example": "axiaoxin"
                }
            }
        },
        "demomod.AlertFilterRule": {
            "type": "object",
            "required": [
                "field",
                "operating",
                "relation",
                "value"
            ],
            "properties": {
                "field": {
                    "description": "日志原始字段名",
                    "type": "string",
                    "example": "field"
                },
                "id": {
                    "description": "主键ID",
                    "type": "integer",
                    "example": 0
                },
                "operating": {
                    "description": "操作符",
                    "type": "string",
                    "example": "="
                },
                "relation": {
                    "description": "与或关系（1=与，2=或）",
                    "type": "integer",
                    "example": 1
                },
                "value": {
                    "description": "筛选值（多个值逗号分隔）",
                    "type": "string",
                    "example": "value"
                }
            }
        },
        "demomod.AlertPolicy": {
            "type": "object",
            "required": [
                "alert_channel",
                "alert_group_id",
                "alert_trigger_rules",
                "callback_url",
                "metric_set_id",
                "name",
                "notice_frequency_sec",
                "notice_period_end",
                "status",
                "url_scheme"
            ],
            "properties": {
                "alert_channel": {
                    "description": "告警接收渠道 1=邮件 2=短信 3=微信",
                    "type": "string",
                    "example": "weixin,sms"
                },
                "alert_filter_rules": {
                    "description": "告警过滤条件",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/demomod.AlertFilterRule"
                    }
                },
                "alert_group_id": {
                    "description": "告警接收组 逗号分隔",
                    "type": "string",
                    "example": "-1,0"
                },
                "alert_trigger_rules": {
                    "description": "告警触发条件",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/demomod.AlertTriggerRule"
                    }
                },
                "appid": {
                    "description": "AppID",
                    "type": "integer",
                    "example": 1
                },
                "callback_url": {
                    "description": "回调url 不包含scheme部分",
                    "type": "string",
                    "example": "axiaoxin.com"
                },
                "id": {
                    "description": "主键ID",
                    "type": "integer",
                    "example": 0
                },
                "latest_alert_time": {
                    "description": "最后告警时间（产生告警后更改该字段）",
                    "type": "string"
                },
                "metric_set_id": {
                    "description": "指标集ID",
                    "type": "integer",
                    "example": -1
                },
                "name": {
                    "description": "策略名称",
                    "type": "string",
                    "example": "swag-test-name"
                },
                "notice_frequency_sec": {
                    "description": "通知频率（通知间隔秒数）",
                    "type": "integer",
                    "example": 60
                },
                "notice_period_begin": {
                    "description": "通知时段开始时间（从00:00:00开始计算的秒数）",
                    "type": "integer",
                    "example": 0
                },
                "notice_period_end": {
                    "description": "通知时段结束时间（从00:00:00开始计算的秒数）",
                    "type": "integer",
                    "example": 86399
                },
                "status": {
                    "description": "状态 1=已开启 2=未开启 3=已失效",
                    "type": "integer",
                    "example": 1
                },
                "uin": {
                    "description": "Uin",
                    "type": "string",
                    "example": "axiaoxin"
                },
                "url_scheme": {
                    "description": "回调url的scheme",
                    "type": "string",
                    "example": "http"
                }
            }
        },
        "demomod.AlertTriggerRule": {
            "type": "object",
            "required": [
                "continuous_cycle_count",
                "metric_id",
                "metric_type",
                "operating",
                "relation",
                "value"
            ],
            "properties": {
                "continuous_cycle_count": {
                    "description": "持续周期个数",
                    "type": "integer",
                    "example": 1
                },
                "id": {
                    "description": "主键ID",
                    "type": "integer",
                    "example": 0
                },
                "metric_id": {
                    "description": "指标id",
                    "type": "integer",
                    "example": -1
                },
                "metric_type": {
                    "description": "指标类型 1=普通指标 2=复合指标",
                    "type": "integer",
                    "example": 1
                },
                "operating": {
                    "description": "操作符",
                    "type": "string",
                    "example": "="
                },
                "relation": {
                    "description": "与或关系（1=与，2=或）",
                    "type": "integer",
                    "example": 1
                },
                "value": {
                    "description": "指标阈值",
                    "type": "string",
                    "example": "1"
                }
            }
        },
        "response.Response": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "object"
                },
                "data": {
                    "type": "object"
                },
                "msg": {
                    "type": "string"
                }
            }
        },
        "utils.JSONTime": {
            "type": "object"
        }
    }
}